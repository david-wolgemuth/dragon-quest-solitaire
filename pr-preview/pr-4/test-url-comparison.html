<!DOCTYPE html>
<html>
<head>
  <title>Test Generated URL State</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Testing Generated URL State</h1>
  <button onclick="testGenerated()">Test Generated State (seed 1000)</button>
  <button onclick="testWorking()">Test Known Working State</button>
  <div id="output"></div>

  <!-- Include all scripts in correct order -->
  <script src="cards.js"></script>
  <script src="dungeon-cards.js"></script>
  <script src="url-state.js"></script>
  <script src="index.js"></script>

  <script>
    function testGenerated() {
      // This is the state that would be generated by generate-preview-url.js with seed 1000
      const testUrl = '?state=eyJoZWFsdGgiOnsic3RvY2siOltdLCJhdmFpbGFibGUiOlt7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6IkFDRSJ9LHsic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiVFdPIn0seyJzdWl0IjoiSEVBUlRTIiwidmFsdWUiOiJUSFJFRSJ9LHsic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiRk9VUiJ9LHsic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiRklWRSJ9XX0sImludmVudG9yeSI6eyJzdG9jayI6W3sic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiUVVFRU4ifSx7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6IktJTkcifSx7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6IkpBQ0sifSx7InN1aXQiOiJSRUQiLCJ2YWx1ZSI6IkpPS0VSIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6IkpBQ0sifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiUVVFRU4ifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiS0lORyJ9XSwiYXZhaWxhYmxlIjpbXX0sImdlbXMiOnsic3RvY2siOlt7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiQUNFIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6IlRXTyJ9LHsic3VpdCI6IkRJQU1PTkRTIiwidmFsdWUiOiJUSFJFRSJ9LHsic3VpdCI6IkRJQU1PTkRTIiwidmFsdWUiOiJGT1VSIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6IkZJVkUifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiU0lYIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6IlNFVkVOIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6IkVJR0hUIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6Ik5JTkUifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiVEVOIn1dLCJhdmFpbGFibGUiOltdfSwiZmF0ZSI6eyJzdG9jayI6W3sic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiU0lYIn0seyJzdWl0IjoiSEVBUlRTIiwidmFsdWUiOiJFSUdIVCJ9LHsic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiU0VWRU4ifSx7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6Ik5JTkUifSx7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6IlRFTiJ9XSwiYXZhaWxhYmxlIjpbXX0sImR1bmdlb24iOnsic3RvY2siOlt7InN1aXQiOiJDTFVCUyIsInZhbHVlIjoiUVVFRU4ifSx7InN1aXQiOiJTUEFERVMiLCJ2YWx1ZSI6IlFVRUVOIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJBQ0UifSx7InN1aXQiOiJTUEFERVMiLCJ2YWx1ZSI6IlNFVkVOIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJTSVgifSx7InN1aXQiOiJDTFVCUyIsInZhbHVlIjoiVEVOIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IkZPVVIifSx7InN1aXQiOiJTUEFERVMiLCJ2YWx1ZSI6IlRIUkVFIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IkVJR0hUIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6Ik5JTkUifSx7InN1aXQiOiJCTEFDSyIsInZhbHVlIjoiSk9LRVIifSx7InN1aXQiOiJDTFVCUyIsInZhbHVlIjoiVFdPIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IlRIUkVFIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJGT1VSIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJURU4ifSx7InN1aXQiOiJDTFVCUyIsInZhbHVlIjoiU0lYIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJFSUdIVCJ9LHsic3VpdCI6IlNQQURFUyIsInZhbHVlIjoiVFdPIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IkpBQ0sifSx7InN1aXQiOiJDTFVCUyIsInZhbHVlIjoiU0VWRU4ifSx7InN1aXQiOiJTUEFERVMiLCJ2YWx1ZSI6IktJTkcifSx7InN1aXQiOiJDTFVCUyIsInZhbHVlIjoiQUNFIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJKQUNLIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IktJTkcifSx7InN1aXQiOiJTUEFERVMiLCJ2YWx1ZSI6Ik5JTkUifSx7InN1aXQiOiJDTFVCUyIsInZhbHVlIjoiRklWRSJ9XSwibWF0cml4IjpbeyJyb3ciOjAsImNvbCI6MCwiY2FyZCI6eyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJGSVZFIn0sImZhY2VEb3duIjp0cnVlfV19fQ==';

      try {
        const state = deserializeGameState(testUrl.substring(1));
        console.log('✅ Deserialized:', state);

        const game = new Game({ state });
        console.log('✅ Game created');
        console.log('Game health:', game.health);
        console.log('Game dungeon matrix size:', game.dungeon.matrix.length, 'x', game.dungeon.matrix[0].length);
        console.log('Game dungeon matrix:', game.dungeon.matrix);

        game.render();
        console.log('✅ Game rendered');

        document.getElementById('output').innerHTML = '<div style="color: green">✅ Generated state loaded successfully!</div>';
      } catch (error) {
        console.error('❌ Error:', error);
        document.getElementById('output').innerHTML = '<div style="color: red">❌ Error: ' + error.message + '</div>';
      }
    }

    function testWorking() {
      // This is a known working state from the user
      const testUrl = '?state=eyJoZWFsdGgiOnsic3RvY2siOlt7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6IkZJVkUifSx7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6IkZPVVIifV0sImF2YWlsYWJsZSI6W3sic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiQUNFIn0seyJzdWl0IjoiSEVBUlRTIiwidmFsdWUiOiJUV08ifSx7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6IlRIUkVFIn1dfSwiaW52ZW50b3J5Ijp7InN0b2NrIjpbeyJzdWl0IjoiSEVBUlRTIiwidmFsdWUiOiJLSU5HIn0seyJzdWl0IjoiUkVEIiwidmFsdWUiOiJKT0tFUiJ9LHsic3VpdCI6IkRJQU1PTkRTIiwidmFsdWUiOiJLSU5HIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6IlFVRUVOIn0seyJzdWl0IjoiSEVBUlRTIiwidmFsdWUiOiJRVUVFTiJ9LHsic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiSkFDSyJ9LHsic3VpdCI6IkRJQU1PTkRTIiwidmFsdWUiOiJKQUNLIn1dLCJhdmFpbGFibGUiOltdfSwiZ2VtcyI6eyJzdG9jayI6W3sic3VpdCI6IkRJQU1PTkRTIiwidmFsdWUiOiJBQ0UifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiVFdPIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6IlRIUkVFIn0seyJzdWl0IjoiRElBTU9ORFMiLCJ2YWx1ZSI6IkZPVVIifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiRklWRSJ9LHsic3VpdCI6IkRJQU1PTkRTIiwidmFsdWUiOiJTSVgifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiU0VWRU4ifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiRUlHSFQifSx7InN1aXQiOiJESUFNT05EUyIsInZhbHVlIjoiTklORSJ9LHsic3VpdCI6IkRJQU1PTkRTIiwidmFsdWUiOiJURU4ifV0sImF2YWlsYWJsZSI6W119LCJmYXRlIjp7InN0b2NrIjpbeyJzdWl0IjoiSEVBUlRTIiwidmFsdWUiOiJTSVgifSx7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6IlRFTiJ9LHsic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiRUlHSFQifSx7InN1aXQiOiJIRUFSVFMiLCJ2YWx1ZSI6Ik5JTkUifV0sImF2YWlsYWJsZSI6W3sic3VpdCI6IkhFQVJUUyIsInZhbHVlIjoiU0VWRU4ifV19LCJkdW5nZW9uIjp7InN0b2NrIjpbeyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJGSVZFIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJURU4ifSx7InN1aXQiOiJTUEFERVMiLCJ2YWx1ZSI6IktJTkcifSx7InN1aXQiOiJTUEFERVMiLCJ2YWx1ZSI6IkVJR0hUIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IlNJWCJ9LHsic3VpdCI6IkNMVUJTIiwidmFsdWUiOiJLSU5HIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IkVJR0hUIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJTRVZFTiJ9LHsic3VpdCI6IkNMVUJTIiwidmFsdWUiOiJGSVZFIn0seyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJRVUVFTiJ9LHsic3VpdCI6IkNMVUJTIiwidmFsdWUiOiJUSFJFRSJ9LHsic3VpdCI6IlNQQURFUyIsInZhbHVlIjoiRk9VUiJ9LHsic3VpdCI6IkNMVUJTIiwidmFsdWUiOiJTRVZFTiJ9LHsic3VpdCI6IkNMVUJTIiwidmFsdWUiOiJGT1VSIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IkFDRSJ9LHsic3VpdCI6IlNQQURFUyIsInZhbHVlIjoiSkFDSyJ9LHsic3VpdCI6IkJMQUNLIiwidmFsdWUiOiJKT0tFUiJ9LHsic3VpdCI6IkNMVUJTIiwidmFsdWUiOiJUV08ifSx7InN1aXQiOiJTUEFERVMiLCJ2YWx1ZSI6IlRXTyJ9LHsic3VpdCI6IkNMVUJTIiwidmFsdWUiOiJOSU5FIn0seyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IlRFTiJ9XSwibWF0cml4IjpbeyJyb3ciOjEsImNvbCI6MiwiY2FyZCI6eyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJUSFJFRSJ9LCJmYWNlRG93biI6dHJ1ZX0seyJyb3ciOjEsImNvbCI6MywiY2FyZCI6eyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJOSU5FIn0sImZhY2VEb3duIjpmYWxzZX0seyJyb3ciOjIsImNvbCI6MiwiY2FyZCI6eyJzdWl0IjoiQ0xVQlMiLCJ2YWx1ZSI6IkpBQ0sifSwiZmFjZURvd24iOnRydWV9LHsicm93IjozLCJjb2wiOjEsImNhcmQiOnsic3VpdCI6IlNQQURFUyIsInZhbHVlIjoiU0lYIn0sImZhY2VEb3duIjpmYWxzZX0seyJyb3ciOjMsImNvbCI6MiwiY2FyZCI6eyJzdWl0IjoiU1BBREVTIiwidmFsdWUiOiJBQ0UifSwiZmFjZURvd24iOnRydWV9LHsicm93IjozLCJjb2wiOjMsImNhcmQiOnsic3VpdCI6IkNMVUJTIiwidmFsdWUiOiJRVUVFTiJ9LCJmYWNlRG93biI6ZmFsc2V9XX19';

      try {
        const state = deserializeGameState(testUrl.substring(1));
        console.log('✅ Deserialized:', state);

        const game = new Game({ state });
        console.log('✅ Game created');
        console.log('Game health:', game.health);
        console.log('Game dungeon matrix size:', game.dungeon.matrix.length, 'x', game.dungeon.matrix[0].length);

        game.render();
        console.log('✅ Game rendered');

        document.getElementById('output').innerHTML = '<div style="color: green">✅ Working state loaded successfully!</div>';
      } catch (error) {
        console.error('❌ Error:', error);
        document.getElementById('output').innerHTML = '<div style="color: red">❌ Error: ' + error.message + '</div>';
      }
    }
  </script>
</body>
</html>
